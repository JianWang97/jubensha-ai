{"openapi":"3.1.0","info":{"title":"AI剧本杀游戏","version":"0.1.0"},"paths":{"/api/scripts/":{"get":{"tags":["剧本管理"],"summary":"获取剧本列表","description":"获取剧本列表","operationId":"get_scripts_api_scripts__get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"剧本状态过滤","title":"Status"},"description":"剧本状态过滤"},{"name":"author","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"作者过滤","title":"Author"},"description":"作者过滤"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["剧本管理"],"summary":"创建剧本","description":"创建新剧本","operationId":"create_script_api_scripts__post","requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_script_api_scripts__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scripts/{script_id}":{"get":{"tags":["剧本管理"],"summary":"获取剧本详情","description":"获取剧本详情","operationId":"get_script_api_scripts__script_id__get","parameters":[{"name":"script_id","in":"path","required":true,"schema":{"type":"integer","title":"Script Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["剧本管理"],"summary":"更新剧本","description":"更新剧本信息","operationId":"update_script_api_scripts__script_id__put","parameters":[{"name":"script_id","in":"path","required":true,"schema":{"type":"integer","title":"Script Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScriptUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["剧本管理"],"summary":"删除剧本","description":"删除剧本","operationId":"delete_script_api_scripts__script_id__delete","parameters":[{"name":"script_id","in":"path","required":true,"schema":{"type":"integer","title":"Script Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scripts/search/{keyword}":{"get":{"tags":["剧本管理"],"summary":"搜索剧本","description":"搜索剧本","operationId":"search_scripts_api_scripts_search__keyword__get","parameters":[{"name":"keyword","in":"path","required":true,"schema":{"type":"string","title":"Keyword"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"返回数量限制","default":20,"title":"Limit"},"description":"返回数量限制"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scripts/stats/overview":{"get":{"tags":["剧本管理"],"summary":"获取剧本统计信息","description":"获取剧本统计信息","operationId":"get_script_stats_api_scripts_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/scripts/upload/cover":{"post":{"tags":["剧本管理"],"summary":"上传封面图片","description":"上传剧本封面图片","operationId":"upload_cover_image_api_scripts_upload_cover_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_cover_image_api_scripts_upload_cover_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scripts/upload/avatar":{"post":{"tags":["剧本管理"],"summary":"上传角色头像","description":"上传角色头像图片","operationId":"upload_avatar_image_api_scripts_upload_avatar_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_avatar_image_api_scripts_upload_avatar_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scripts/upload/evidence":{"post":{"tags":["剧本管理"],"summary":"上传证据图片","description":"上传证据图片","operationId":"upload_evidence_image_api_scripts_upload_evidence_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_evidence_image_api_scripts_upload_evidence_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scripts/upload/scene":{"post":{"tags":["剧本管理"],"summary":"上传场景背景图","description":"上传场景背景图片","operationId":"upload_scene_image_api_scripts_upload_scene_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_scene_image_api_scripts_upload_scene_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Get Index","description":"返回主页面","operationId":"get_index__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/script-manager":{"get":{"summary":"Get Script Manager","description":"返回剧本管理页面","operationId":"get_script_manager_script_manager_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/game/status":{"get":{"summary":"Get Game Status","description":"获取游戏状态API","operationId":"get_game_status_api_game_status_get","parameters":[{"name":"session_id","in":"query","required":false,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/game/start":{"post":{"summary":"Start Game","description":"启动游戏API","operationId":"start_game_api_game_start_post","parameters":[{"name":"session_id","in":"query","required":false,"schema":{"type":"string","title":"Session Id"}},{"name":"script_id","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Script Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/game/reset":{"post":{"summary":"Reset Game","description":"重置游戏API","operationId":"reset_game_api_game_reset_post","parameters":[{"name":"session_id","in":"query","required":false,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scripts":{"get":{"summary":"Get Scripts","description":"获取剧本列表API","operationId":"get_scripts_api_scripts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/characters/{script_id}":{"get":{"summary":"Get Characters","description":"获取指定剧本的角色信息API","operationId":"get_characters_api_characters__script_id__get","parameters":[{"name":"script_id","in":"path","required":true,"schema":{"type":"integer","title":"Script Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/background/{script_id}":{"get":{"summary":"Get Background By Script","description":"获取指定剧本的背景故事API","operationId":"get_background_by_script_api_background__script_id__get","parameters":[{"name":"script_id","in":"path","required":true,"schema":{"type":"integer","title":"Script Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/background":{"get":{"summary":"Get Background","description":"获取背景故事API（兼容旧版本）","operationId":"get_background_api_background_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/voices":{"get":{"summary":"Get Voice Assignments","description":"获取声音分配信息API","operationId":"get_voice_assignments_api_voices_get","parameters":[{"name":"session_id","in":"query","required":false,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tts/stream":{"post":{"summary":"Stream Tts","description":"TTS流式音频生成API","operationId":"stream_tts_api_tts_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TTSRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_create_script_api_scripts__post":{"properties":{"script_data":{"type":"string","title":"Script Data","description":"剧本JSON数据"},"cover_image":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"Cover Image","description":"封面图片"}},"type":"object","required":["script_data"],"title":"Body_create_script_api_scripts__post"},"Body_upload_avatar_image_api_scripts_upload_avatar_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_avatar_image_api_scripts_upload_avatar_post"},"Body_upload_cover_image_api_scripts_upload_cover_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_cover_image_api_scripts_upload_cover_post"},"Body_upload_evidence_image_api_scripts_upload_evidence_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_evidence_image_api_scripts_upload_evidence_post"},"Body_upload_scene_image_api_scripts_upload_scene_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_scene_image_api_scripts_upload_scene_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ScriptUpdateRequest":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"author":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author"},"player_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Player Count"},"duration_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Minutes"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Difficulty"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"type":"object","title":"ScriptUpdateRequest"},"TTSRequest":{"properties":{"text":{"type":"string","title":"Text"},"character":{"type":"string","title":"Character","default":"default"}},"type":"object","required":["text"],"title":"TTSRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}